<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "../xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta name="copyright"
            content="Copyright Technical University Berlin and others 2004, 2010. This page is made available under the Eclipse Public License v1.0. For full details see http://www.eclipse.org/legal/epl-v10.html" />
      <link rel="stylesheet" type="text/css" href="../css/ot.css" />
      <link rel="stylesheet" type="text/css" href="../css/otjld.css" />
      <title>OT/J Language Definition v1.3</title>
   </head>
   <body class="otdt">
      <div id="content">
         <table class="nav">
            <tr>
               <td class="back"><a id="top"></a></td>
               <td class="top"><a href="index.html" rel="contents">&uarr;&nbsp;Table of Contents&nbsp;&uarr;</a></td>
               <td class="next"><a href="s2.4.2.html" rel="next">&sect;2.4.2&nbsp;Role creation via a regular constructor&nbsp;&gt;&gt;</a></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s2.html" rel="section">&sect;2&nbsp;Role Binding</a>&nbsp;&gt;&nbsp;<a class="nav" href="s2.4.html" rel="section">&sect;2.4&nbsp;Explicit role creation</a></div>
         <div class="sect depth3" id="s2.4.1">
            <h3 class="sect">&sect;2.4.1&nbsp;Role creation via a lifting constructor</h3>
            <p>Lifting uses the default constructor for roles (see <a href="s2.3.1.html" title="&sect;2.3.1&nbsp;Implicit role creation"
                  class="sect">&sect;2.3.1</a>).
               This constructor can be invoked from client code, if the following rules are respected.
               			
            </p>
            <div class="subsect depth4" id="s2.4.1.a">
               <h4 class="subsect">(a)&nbsp;<span class="title">Team context</span></h4>
               <p>The lifting constructor can be used only within the enclosing team of
                  		the role to be instantiated. Thus, qualified allocation expressions
                  		(<code>someTeam.new SomeRole(..)</code>) may never use the lifting constructor.
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s2.4.1.b">
               <h4 class="subsect">(b)&nbsp;<span class="title">Fresh base object</span></h4>
               <p>If the argument to a lifting constructor invocation is a <code>new</code>
                  		expression, creating a fresh base object, the use of the lifting constructor
                  		is safe. Otherwise the rules of (c) below apply.
                  				
               </p>
            </div>
            <div class="subsect depth4" id="s2.4.1.c">
               <h4 class="subsect">(c)&nbsp;<span class="title">Duplicate role runtime check</span></h4>
               <p>If it cannot be syntactically derived, that the argument to a lifting
                  		constructor is a freshly created base object (b), a compile time warning will
                  		signal that an additional runtime check is needed: It must be prevented that
                  		a new role is created for a base object, which already has a role of the
                  		required type in the given team. It is not possible to replace an existing
                  		role by use of the lifting constructor. At runtime, any attempt to do so
                  		will cause a <code>org.objectteams.DuplicateRoleException</code> to be thrown.
                  		This exception can only occur in situations where the mentioned compile
                  		time warning had been issued.
                  		<br /><a href="s6.1.html" title="&sect;6.1&nbsp;Reflection" class="sect">&sect;6.1</a> will introduce reflective functions
                  which can be used to manually prevent errors like a duplicate role.
                  				
               </p>
            </div>
         </div>
         <table class="nav">
            <tr>
               <td class="back"></td>
               <td class="top"><a href="index.html" rel="contents">&uarr;&nbsp;Table of Contents&nbsp;&uarr;</a></td>
               <td class="next"><a href="s2.4.2.html" rel="next">&sect;2.4.2&nbsp;Role creation via a regular constructor&nbsp;&gt;&gt;</a></td>
            </tr>
         </table>
         <div class="breadcrumb"><a class="nav" href="s2.html" rel="section">&sect;2&nbsp;Role Binding</a>&nbsp;&gt;&nbsp;<a class="nav" href="s2.4.html" rel="section">&sect;2.4&nbsp;Explicit role creation</a></div>
      </div>
      <div id="footer">
         <hr />
         <address>&copy; Stephan Herrmann, Christine Hundt, Marco Mosconi</address>
         			OT/J version 1.3 &mdash; last modified: 2010-02-20
      </div>
   </body>
</html>